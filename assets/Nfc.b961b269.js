import{Q as f}from"./QBtn.a1442f66.js";import{u as m,Q as p}from"./use-quasar.9a5545d6.js";import{_ as g,d as w,r as u,A as v,B as x,C as y,f as d,M as $,R as C,P as N}from"./index.59b76842.js";import"./render.3e5ae0ee.js";const P=w({name:"IndexPage",setup(){m().dark.set(!0);const e=u(!1),a=u("");async function l(){(await navigator.permissions.query({name:"nfc"})).state==="granted"&&(e.value=!0)}const o=new AbortController;o.signal.onabort=s=>{};let i=function(){},n=function(){},c=function(){};if("NDEFReader"in window){const s=new NDEFReader;n=function(){o.abort()},c=async function(){const r={recordType:"url",data:"https://dexif.com/"};await s.write({records:[r]},{signal:o.signal})},i=async function(){await s.scan({signal:o.signal}),s.onreading=r=>{a.value+=JSON.stringify(r)}}}return{allow:e,scan:i,abort:n,writeDexif:c,requestPermissions:l,loglist:a}},mounted(){this.requestPermissions()}});function b(t,e,a,l,o,i){return v(),x(p,{class:"flex flex-center"},{default:y(()=>[d(f,{color:t.allow?"white":"grey",flat:"",size:"xl",icon:"mdi-nfc-variant",text:"Scan",onClick:e[0]||(e[0]=n=>t.scan())},null,8,["color"]),d(f,{color:t.allow?"white":"grey",flat:"",size:"xl",icon:"mdi-pencil",text:"Write dexif",onClick:e[1]||(e[1]=n=>t.writeDexif())},null,8,["color"]),$(N("textarea",{"onUpdate:modelValue":e[2]||(e[2]=n=>t.loglist=n),style:{width:"100%","min-height":"200px"}},null,512),[[C,t.loglist]])]),_:1})}var Q=g(P,[["render",b]]);export{Q as default};
